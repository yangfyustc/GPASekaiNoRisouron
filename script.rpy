#GPA世界的理想论
transform dark_in:
    alpha 1.0
 
transform dark_out:
    alpha 0.5

define bgm_1 = "audio/BGM/Brand_New_Day_のる.ogg"#日常氛围曲，偏积极
define bgm_2 = "audio/BGM/Close_Love_ゆうり(from Yuli Audio Craft).ogg"#小提琴曲，黄昏氛围
define bgm_3 = "audio/BGM/Embers_of_a_Vanishing_Sky_MFP(Marron Fields Production).ogg"#略带紧张氛围，电子乐
define bgm_4 = "audio/BGM/Fighter's_Edge_gooset.ogg"#紧张氛围，短，战斗画面用
define bgm_5 = "audio/BGM/Overcome_のる.ogg"#各种宣传动画类似的氛围曲
define bgm_6 = "audio/BGM/Umbra_Protocol_松浦洋介.ogg"#djf喝酒用氛围曲
define bgm_7 = "audio/BGM/Under_the_Blue_Fizz_松浦洋介.ogg"#gmr用，空灵氛围电子乐
define bgm_8 = "audio/BGM/You_Were_the_Last_Light_松浦洋介.ogg"#bxh用，略带忧伤钢琴曲
define bgm_9 = "audio/BGM/Zen_yuhei komatsu.ogg"#笛为主，激烈
define bgm_10 = "audio/BGM/あくる日のワルツ_ゆうり(from Yuli Audio Craft).ogg"#钢琴曲，kamisama一教用
define bgm_11 = "audio/BGM/あたたかな雪_ゆうり(from Yuli Audio Craft).ogg"#早晨氛围曲
define bgm_12 = "audio/BGM/あの空に向かって_ゆうり(from Yuli Audio Craft).ogg"#日常氛围曲，钢琴，偏平淡
define bgm_13 = "audio/BGM/いつものカフェで待ち合わせ_秦暁.ogg"#djf篇接客用曲子
define bgm_14 = "audio/BGM/かつての聖域_ゆうり(from Yuli Audio Craft).ogg"#阴森氛围曲子
define bgm_15 = "audio/BGM/ほのぼのいい天気_ゆうり(from Yuli Audio Craft).ogg"#笛为主，欢快氛围
define bgm_16 = "audio/BGM/タタリ_ゆうり(from Yuli Audio Craft).ogg"#诡异氛围曲子
define bgm_17 = "audio/BGM/別れの季節_alaki paca.ogg"#钢琴曲，略带忧伤，bxh结尾用
define bgm_18 = "audio/BGM/君影草_すもち.ogg"#钢琴曲，略带忧伤，djf结尾用
define bgm_19 = "audio/BGM/夢の中を泳ぐ魚_ゆうきわたる.ogg"#平淡氛围，钢琴曲，梦境用
define bgm_20 = "audio/BGM/星空の導き_alaki paca.ogg"#钢琴曲，抒情
define bgm_21 = "audio/BGM/晴れやかな日の午後に_しんさんわーくす.ogg"#日常氛围，钢琴为主，欢快
define bgm_22 = "audio/BGM/暗闇を駆け抜けろ！_alaki paca.ogg"#激烈，电子乐
define bgm_23 = "audio/BGM/桜が散る時_yuhei komatsu.ogg"#钢琴曲，抒情，finale用
define bgm_24 = "audio/BGM/桜吹雪の誓い_ゆうり(from Yuli Audio Craft).ogg"#Theme Song
define bgm_25 = "audio/BGM/沈みゆく体、浮かぶ意識_alaki paca.ogg"#梦境用，感情更丰富一点
define bgm_26 = "audio/BGM/祭りの夜_ゆうり(from Yuli Audio Craft).ogg"#铃为主，cy在房间里独自回忆时用
define bgm_27 = "audio/BGM/言霊_ゆうり(from Yuli Audio Craft).ogg"#铃为主，欢快
define bgm_28 = "audio/BGM/路地裏ファンタジー_yuhei komatsu.ogg"#笛为主，欢快氛围
define bgm_29 = "audio/BGM/迫る闇_ゆうり(from Yuli Audio Craft).ogg"#铃为主，诡异氛围
define bgm_30 = "audio/BGM/陰謀論_ゆうり(from Yuli Audio Craft).ogg"#诡异、紧张氛围，管乐
define bgm_31 = "audio/BGM/雪、吹き乱れて(Snow,blizzarding)_蒲鉾さちこ.ogg"#钢琴曲，抒情，适用于心绪不宁场景

define sound_1 = "audio/BGS/Angel03-3(High-Reverb).ogg"#kamisama入场效果音
define sound_2 = "audio/BGS/Beverage_Can-Pull_Tab02-1.ogg"#开汽水罐效果音
define sound_3 = "audio/BGS/Camera_Motion06-3(Delay).ogg"#镜头转换，低沉
define sound_4 = "audio/BGS/Camera_Motion06-6(Delay-Effect).ogg"#镜头转换，音调稍高
define sound_5 = "audio/BGS/Cannon01-6.ogg"#加农炮爆炸声
define sound_6 = "audio/BGS/Clock-Second_Hand02-1(Dry-Loop).ogg"#时钟声音，不带回响
define sound_7 = "audio/BGS/Clock-Second_Hand02-4(Reverb-Loop).ogg"#时钟声音，带回响
define sound_8 = "audio/BGS/Doorbell-Ding_Dong02-1.ogg"#门铃声
define sound_9 = "audio/BGS/Explosion05-1(Short).ogg"#大爆炸声
define sound_10 = "audio/BGS/Finger_Cymbals03-3(Mute).ogg"#干杯声
define sound_11 = "audio/BGS/Footsteps02-1L.ogg"#脚步声中
define sound_12 = "audio/BGS/Footsteps02-2L.ogg"#脚步声快
define sound_13 = "audio/BGS/Footsteps02-3L.ogg"#脚步声慢
define sound_14 = "audio/BGS/Heartbeat03-3(Slow-Loop).ogg"#心跳声，慢
define sound_15 = "audio/BGS/Heartbeat03-4(Fast-Loop).ogg"#心跳声，快
define sound_16 = "audio/BGS/Hit07-1.ogg"#打击声，不带回响
define sound_17 = "audio/BGS/Hit07-5.ogg"#打击声，带回响
define sound_18 = "audio/BGS/Horror_Accent13-3(Short).ogg"#诡异氛围用效果音
define sound_19 = "audio/BGS/Onoma-Negative02-1(Short).ogg"#消沉
define sound_20 = "audio/BGS/Onoma-Sparkle08-1(Short).ogg"#切换章节用
define sound_21 = "audio/BGS/Onoma-Surprise03-3(Low-Short).ogg"#惊讶效果音
define sound_22 = "audio/BGS/Opening_Buzzer02-1.ogg"#电影开场
define sound_23 = "audio/BGS/Padlock01-hook1.ogg"#插钥匙声
define sound_24 = "audio/BGS/Padlock01-lock2.ogg"#关锁声
define sound_25 = "audio/BGS/Padlock01-unlock2.ogg"#开锁声
define sound_26 = "audio/BGS/Rain-Real_Ambi02-1.ogg"#雨声
define sound_27 = "audio/BGS/RingBell.ogg"#铃声，测试用音效
define sound_28 = "audio/BGS/Scene-Flashback03-1(Short).ogg"#过去记忆转换
define sound_29 = "audio/BGS/Scene-Flashback08-2(Short).ogg"#角色视角转换
define sound_30 = "audio/BGS/Short_Accent12-1(Dry).ogg"#提示音
define sound_31 = "audio/BGS/Smartphone-Ringtone02-10(Speaker).ogg"#手机铃声
define sound_32 = "audio/BGS/Thunder-Real_Ambi03-1.ogg"#雷声


image Rain_0 = "gui/effect/rain_0_0.png"
image Rain_1 = "gui/effect/rain_0_1.png"
image Rain_2 = "gui/effect/rain_0_2.png"
image Rain_3 = "gui/effect/rain_0_3.png"
image BigRain_0 = "gui/effect/rain_0_0.png"
image BigRain_1 = "gui/effect/rain_0_1.png"
image BigRain_2 = "gui/effect/rain_0_2.png"
image BigRain_3 = "gui/effect/rain_0_3.png"
image yume_0 = "gui/effect/effect_yume_1.png"
image yume_1 = "gui/effect/effect_yume_2.png"
image yume_2 = "gui/effect/effect_yume_3.png"
image yume_3 = "gui/effect/effect_yume_4.png"
image yume_4 = "gui/effect/effect_yume_4.png"
image yume_5 = "gui/effect/effect_yume_3.png"
image yume_6 = "gui/effect/effect_yume_2.png"
image yume_7 = "gui/effect/effect_yume_1.png"
image yume_back = "gui/effect/back_yume.png"

transform Rain_ts(x1, y1, x2, y2, x3, y3, t1, t2, t3, y_t1=0.16, y_t2=0.16, y_t3=0.16, y_add=500):
    blur 2
    xpos x1 ypos y1-y_add yoffset 0
    easeout y_t1 yoffset y_add 
    ypos 1200
    pause t1
    xpos x2 ypos y2-y_add yoffset 0
    easeout y_t2 yoffset y_add 
    ypos 1200
    pause t2
    xpos x3 ypos y3-y_add yoffset 0
    easeout y_t3 yoffset y_add 
    ypos 1200
    pause t3
    repeat

label Rain:
    show Rain_0 onlayer screens zorder 1 at Rain_ts(1324,846,1392,124,99,535,0.08,0.18,0.24)
    show Rain_1 onlayer screens zorder 1 at Rain_ts(1506,95,633,276,248,848,0.02,0.35,0.13)
    show Rain_2 onlayer screens zorder 1 at Rain_ts(643,873,713,735,742,298,0.25,0.1,0.15)
    show Rain_3 onlayer screens zorder 1 at Rain_ts(830,300,1111,563,357,823,0.34,0.08,0.08)
    return
label Rain_(ti=1.5):
    hide Rain_0 onlayer screens
    hide Rain_1 onlayer screens
    hide Rain_2 onlayer screens
    hide Rain_3 onlayer screens
    with Dissolve(ti)
    return
label BigRain:
    show Rain_0 onlayer screens zorder 1 at Rain_ts(1324,846,1392,124,99,535,0.08,0.18,0.24)
    show Rain_1 onlayer screens zorder 1 at Rain_ts(1506,95,633,276,248,848,0.02,0.35,0.13)
    show Rain_2 onlayer screens zorder 1 at Rain_ts(643,873,713,735,742,298,0.25,0.1,0.15)
    show Rain_3 onlayer screens zorder 1 at Rain_ts(830,300,1111,563,357,823,0.34,0.08,0.08)
    show BigRain_0 onlayer screens zorder 1 at Rain_ts(760,279,822,331,804,636,0.12,0.26,0.12)
    show BigRain_1 onlayer screens zorder 1 at Rain_ts(1159,768,1388,488,396,363,0.17,0.29,0.04)
    show BigRain_2 onlayer screens zorder 1 at Rain_ts(896,359,478,796,940,373,0.33,0.04,0.13)
    show BigRain_3 onlayer screens zorder 1 at Rain_ts(43,467,903,882,78,609,0.11,0.09,0.30)
    return
label BigRain_(ti=1.5):
    hide Rain_0 onlayer screens
    hide Rain_1 onlayer screens
    hide Rain_2 onlayer screens
    hide Rain_3 onlayer screens
    hide BigRain_0 onlayer screens
    hide BigRain_1 onlayer screens
    hide BigRain_2 onlayer screens
    hide BigRain_3 onlayer screens
    with Dissolve(ti)
    return
label yume:
    show yume_back onlayer screens zorder 0
    show yume_0 onlayer screens zorder 1 at Rain_ts(1324,0,1392,124,99,0,0.08,0.18,0.24,0.16,0.16,0.16,0)
    show yume_1 onlayer screens zorder 1 at Rain_ts(1506,95,633,276,248,848,0.02,0.35,0.13,0.16,0.16,0.16,0)
    show yume_2 onlayer screens zorder 1 at Rain_ts(643,873,713,735,742,298,0.25,0.1,0.15,0.16,0.16,0.16,0)
    show yume_3 onlayer screens zorder 1 at Rain_ts(830,0,1111,0,357,823,0.34,0.08,0.08,0.16,0.16,0.16,0)
    show yume_4 onlayer screens zorder 1 at Rain_ts(760,279,822,331,804,636,0.12,0.26,0.12,0.16,0.16,0.16,0)
    show yume_5 onlayer screens zorder 1 at Rain_ts(1159,768,1388,488,396,363,0.17,0.29,0.04,0.16,0.16,0.16,0)
    show yume_6 onlayer screens zorder 1 at Rain_ts(896,359,478,796,940,373,0.33,0.04,0.13,0.16,0.16,0.16,0)
    show yume_7 onlayer screens zorder 1 at Rain_ts(43,0,903,882,78,609,0.11,0.09,0.30,0.16,0.16,0.16,0)
    return
label yume_(ti=1.5):
    hide yume_back onlayer screens
    hide yume_0 onlayer screens
    hide yume_1 onlayer screens
    hide yume_2 onlayer screens
    hide yume_3 onlayer screens
    hide yume_4 onlayer screens
    hide yume_5 onlayer screens
    hide yume_6 onlayer screens
    hide yume_7 onlayer screens
    with Dissolve(ti)
    return

define eyeopen = ImageDissolve("gui/transition/eyesopenclose.png", 1.0)
define eyeclose = ImageDissolve("gui/transition/eyesopenclose.png", 1.0, reverse=True)
define dooropen = ImageDissolve("gui/transition/dooropen.png", 1.5)
define doorclose = ImageDissolve("gui/transition/dooropen.png", 1.5, reverse=True)
define yumein = ImageDissolve("gui/transition/yume_in.png",1.0)
define yumeout = ImageDissolve("gui/transition/yume_out.png",1.0)
define leftflash = ImageDissolve("gui/transition/left.png",0.5)
define rightflash = ImageDissolve("gui/transition/right.png",0.5)

# init -1 python:
#     from functools import partial
#     def char_fade(char, event_name, *args, **kwargs):
#         if event_name == "begin":
#             if char != None:
#                 tags = renpy.get_attributes(char)
#                 str_tags = " ".join(tags)
#                 l = [char, str_tags]
#                 q.append(l)
#                 for x in q:
#                     if(x[0] == char):
#                         x[1] = str_tags
#                 renpy.show(char + " " + str_tags, at_list=[dark_in])
#                 for x in q:                                  
#                     if x[0] != char:
#                         renpy.show(x[0] + " " + x[1], at_list=[dark_out])
#         if event_name == "end":
#             for x in q:
#                 renpy.show(x[0] + " " + x[1], at_list=[dark_out])

define bxh = Character("包馨荷", who_color="#d7ee05", what_prefix="「", what_suffix="」", voice_tag="bxh")#, callback=partial(char_fade,"包馨荷"))
define bxh_sub = Character("女孩子", who_color="#d7ee05", what_prefix="「", what_suffix="」", voice_tag="bxh")

define djf = Character("杜绛枫", who_color="#da21bb", what_prefix="「", what_suffix="」", voice_tag="djf")#, callback=partial(char_fade,"杜绛枫"))
define djf_sub = Character("女孩子", who_color="#da21bb", what_prefix="「", what_suffix="」", voice_tag="djf")

define gmr = Character("郭茉渃", who_color="#ffffe6", what_prefix="「", what_suffix="」", voice_tag="gmr")#, callback=partial(char_fade,"郭茉渃"))
define cy = Character("常远", who_color="#9292ff", what_prefix="「", what_suffix="」")#, callback=partial(char_fade,"常远"))

define kurokage = Character("未知的黑影", who_color="#880bc2", what_prefix="「", what_suffix="」", voice_tag="others")
define guest = Character("客人", who_color="#880bc2", what_prefix="「", what_suffix="」", voice_tag="others")

define kamisama1 = Character("『？ ？ ？』", who_color="#7c0029", what_prefix="「", what_suffix="」", voice_tag="others")
define kamisama2 = Character("『神』", who_color="#7c0029", what_prefix="「", what_suffix="」", voice_tag="others")

label start:
stop music fadeout 1.0
play sound sound_27
$ transition_template = preferences.transitions
$ preferences.transitions = 2
with fade
$ preferences.transitions = transition_template
call Chapter_0
return